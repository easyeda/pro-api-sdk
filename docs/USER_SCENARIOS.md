# ユーザーシナリオ & 実装例

 

## 初心者向けAI回路設計エージェント - 実際の使用例

 

このドキュメントでは、実際にシステムを使用する際の具体的なシナリオと、裏側で動作するAIの処理フローを詳しく説明します。

 

---

 

## 📖 シナリオ 1: 完全初心者がLED点灯回路を作る

 

### ユーザープロフィール

- **名前**: 田中さん（24歳）

- **経験**: プログラミングはできるが、電子工作は全く未経験

- **目標**: Arduinoプロジェクトの第一歩としてLEDを光らせたい

 

### 会話フロー

 

#### Step 1: 初回起動

 

**UI表示**:

```

🤖 AI: こんにちは！回路設計が初めてでも大丈夫です。

       作りたいものを教えてください。

 

       よく聞かれる質問:

       [💡 LED を光らせたい]

       [🌡️ 温度センサーを使いたい]

       [🔋 バッテリーで動かしたい]

```

 

**ユーザー**: 💡 LED を光らせたい（ボタンクリック）

 

#### Step 2: GPT-5.1 の深い理解（Thinking Process）

 

**裏側の処理**:

```typescript

// GPT-5.1 Internal Thinking（ユーザーには見えない）

{

  "thinking_process": {

    "step1_analysis": {

      "thought": "ユーザーは「LED を光らせたい」とだけ言っている。",

      "questions": [

        "単体でLEDを光らせたいのか？",

        "何か制御したいのか？（Arduino等）",

        "どんな色？明るさは？",

        "電源は何を使う？"

      ]

    },

    "step2_assumption": {

      "thought": "初心者なので、最もシンプルなケースを想定。",

      "assumptions": {

        "power": "USB 5V（最も入手しやすい）",

        "led": "赤色LED（最も一般的）",

        "control": "常時点灯（スイッチなし）"

      }

    },

    "step3_safety": {

      "thought": "初心者が安全に作れることが最優先。",

      "concerns": [

        "LEDに直接電源をつなぐと壊れる",

        "抵抗値を間違えると危険",

        "逆接続保護があると安心"

      ],

      "solutions": [

        "電流制限抵抗を必ず含める",

        "安全マージンのある抵抗値を選ぶ",

        "ダイオードで逆接続保護を追加"

      ]

    },

    "step4_教育": {

      "thought": "これを学習の機会にする。",

      "learning_points": [

        "オームの法則の基礎",

        "LEDの極性",

        "抵抗の読み方"

      ]

    }

  },

  "final_approach": {

    "circuit": "USB→逆接続保護ダイオード→抵抗330Ω→赤色LED→GND",

    "cost": "約50円",

    "difficulty": "初心者",

    "educational_value": "高"

  }

}

```

 

#### Step 3: ユーザーへの提案

 

**AI応答**:

```

🤖 AI: いいですね！LEDを光らせる回路を設計しましょう。

 

       🎓 ちょっとした知識

       LEDは「発光ダイオード」という電子部品で、電気を流すと

       光ります。ただし、直接電源につなぐと壊れてしまうので、

       「抵抗」という部品で電流を制限する必要があります。

 

       今回使う部品:

       ┌─────────────────────────────────┐

       │ 💡 LED（赤色）          ¥5    │

       │    C2286 | JLCPCB在庫: ◎     │

       │                                │

       │ ⚡ 抵抗 330Ω            ¥2    │

       │    C21190 | JLCPCB在庫: ◎    │

       │                                │

       │ 🔌 USB コネクタ         ¥15   │

       │    C168690 | JLCPCB在庫: ◎   │

       └─────────────────────────────────┘

 

       合計: 約¥22

 

       質問: これで大丈夫そうですか？

       [✅ 設計を開始] [❓ もっと詳しく]

```

 

**ユーザー**: ❓ もっと詳しく

 

**AI応答（教育モード）**:

```

🤖 AI: わかりました！それぞれの部品を詳しく説明しますね。

 

       💡 **LED（発光ダイオード）**

       ┌────────────────────┐

       │    長い方(+)         │

       │      │              │

       │     ╱│╲            │

       │    ╱ │ ╲           │

       │   └──┴──┘          │

       │   短い方(-)         │

       └────────────────────┘

 

       LEDには「極性」があります。

       - 長い方がプラス(+)

       - 短い方がマイナス(-)

       間違えると光りません（壊れはしません）。

 

       ⚡ **抵抗 330Ω**

       電流を制限する部品です。水道でいう「蛇口」のような役割。

 

       なぜ330Ωなのか？計算してみましょう：

       - USB電源: 5V

       - LED電圧: 約2V

       - 希望電流: 20mA（LEDが適切に光る電流）

 

       オームの法則: R = V / I

       R = (5V - 2V) / 0.02A = 150Ω

 

       ただし、余裕を持って330Ωにします。

       → LED is safer and still bright enough!

 

       🔌 **USBコネクタ**

       スマホの充電器やパソコンから電源をもらえます。

       最も手軽な5V電源です。

 

       理解できましたか？

       [✅ 設計を開始] [🤔 質問がある]

```

 

**ユーザー**: ✅ 設計を開始

 

#### Step 4: 回路の自動生成

 

**UIに表示される進捗**:

```

⏳ 回路を設計しています...

 

  [████████░░░░░░░░░░] 40% - LED を配置中...

  [████████████░░░░░░] 60% - 抵抗を配置中...

  [████████████████░░] 80% - 配線を引いています...

  [████████████████████] 100% - 完成！

```

 

**裏側のEasyEDA API呼び出し**:

```typescript

// 1. LEDを配置

const led = await eda.sch_PrimitiveComponent.create(

  { libraryUuid: "system", uuid: "led-red-uuid" },

  200, 100, // 座標

  undefined, 0, false, true, true

);

 

// 2. 抵抗を配置

const resistor = await eda.sch_PrimitiveComponent.create(

  { libraryUuid: "system", uuid: "resistor-uuid" },

  100, 100,

  undefined, 0, false, true, true

);

 

// 抵抗値を設定

await eda.sch_PrimitiveComponent.modify(resistor.primitiveId, {

  otherProperty: { "Resistance": "330" }

});

 

// 3. 配線

await eda.sch_PrimitiveWire.create(

  [[100, 100], [200, 100]], // 抵抗→LED

  "LED_ANODE"

);

 

// 4. スクリーンショット取得

const screenshot = await eda.dmt_EditorControl.getCurrentRenderedAreaImage();

```

 

#### Step 5: Gemini 2.5 Pro による視覚的検証

 

**Geminiへの入力**:

- **画像**: 生成された回路図のスクリーンショット

- **プロンプト**: "初心者向けLED回路を分析してください"

 

**Geminiの分析結果**:

```json

{

  "overallQuality": "good",

  "layoutScore": 85,

  "strengths": [

    "部品配置が整然としていて見やすい",

    "配線が直線的でシンプル",

    "LEDの極性マークが明確"

  ],

  "issues": [

    {

      "severity": "info",

      "location": "LED1付近",

      "description": "LEDのカソード（マイナス側）にGNDラベルがあるとより分かりやすい",

      "suggestion": "GNDラベルを追加",

      "educational": "GND（グラウンド）は回路の基準点で、通常マイナス側を指します"

    }

  ],

  "improvements": [

    {

      "component": "LED1",

      "action": "add_label",

      "label": "GND",

      "position": "cathode"

    }

  ],

  "learningPoints": [

    "この回路では抵抗がLEDの電流を20mAに制限しています",

    "LEDの長い方（アノード）がプラス、短い方（カソード）がマイナスです"

  ],

  "beginnerFriendly": true

}

```

 

**UIに表示**:

```

🎉 回路が完成しました！

 

┌─────────────────────────────────────┐

│ [回路図のプレビュー画像]              │

│                                     │

│  USB(+5V) ──┬── D1 ──┐            │

│             │         │            │

│            ╱│╲       ⚡ R1        │

│           └─┘      330Ω          │

│  (保護)     │         │            │

│            └─────── LED1 ──┐      │

│                     💡     │      │

│            ┌───────────────┘      │

│  USB(GND) ─┴─ GND                 │

└─────────────────────────────────────┘

 

✅ Gemini による品質チェック: 85/100

 

👍 良い点:

  • 部品配置が整然としている

  • 配線がシンプルで分かりやすい

 

💡 学んだこと:

  • 抵抗がLEDを保護している（20mAに制限）

  • LEDには極性がある（長い方がプラス）

 

📦 使用部品（合計: ¥22）:

  • LED 赤色 (C2286) ¥5

  • 抵抗 330Ω (C21190) ¥2

  • USB コネクタ (C168690) ¥15

 

次のステップ:

[📋 BOMをダウンロード]

[🏭 JLCPCBで発注]

[🎓 次のチュートリアル]

```

 

#### Step 6: JLCPCB発注サポート

 

**ユーザー**: 🏭 JLCPCBで発注（クリック）

 

**AI応答**:

```

🤖 AI: 素晴らしい！基板を発注しましょう。

 

       📦 発注前チェックリスト:

       ✅ 回路が正しく設計されている

       ✅ すべての部品がJLCPCBで入手可能

       ✅ DRCチェック完了（エラーなし）

 

       💰 見積もり:

       ┌─────────────────────────────┐

       │ 基板製造（10枚）    ¥200   │

       │ 部品代              ¥220   │

       │ 組み立て（オプション）¥500  │

       │ 送料               ¥800   │

       │ ─────────────────────────  │

       │ 合計               ¥1,220 │

       │ （組み立てなし）     │

       └─────────────────────────────┘

 

       ⏱️ 納期: 約7-10日

 

       💡 初心者へのアドバイス:

       • 基板の色は緑が標準で安価です

       • 10枚発注が最もコスパが良いです

       • 組み立てサービスは便利ですが、

         自分で半田付けするのも勉強になります

 

       どうしますか？

       [🚀 発注ページを開く]

       [💾 データだけダウンロード]

       [❓ もっと詳しく]

```

 

**ユーザー**: 🚀 発注ページを開く

 

**システム処理**:

```typescript

// 1. Gerber ファイル生成

const gerber = await eda.pcb_ManufactureData.getGerberFile();

 

// 2. BOM生成

const bom = await eda.pcb_ManufactureData.getBomFile();

 

// 3. Pick & Place ファイル生成

const pickPlace = await eda.pcb_ManufactureData.getPickAndPlaceFile();

 

// 4. JLCPCB発注ページを開く

const success = await eda.pcb_ManufactureData.placePcbOrder(

  true,  // インタラクティブモード（ユーザーが最終確認できる）

  false  // 警告を無視しない

);

 

if (success) {

  // 発注ページが新しいタブで開く

  await eda.sys_Message.success(

    'JLCPCBの発注ページを開きました！必要事項を入力して注文を完了してください。'

  );

}

```

 

---

 

## 📖 シナリオ 2: 中級者が温度センサー回路を作る

 

### ユーザープロフィール

- **名前**: 佐藤さん（30歳）

- **経験**: Arduino でLチカは経験済み。センサーは初めて

- **目標**: 温度を測ってLCDに表示する回路

 

### 会話フロー

 

**ユーザー**: Arduino で温度を測って表示したい

 

**GPT-5.1 Thinking**:

```json

{

  "thinking": {

    "analysis": "温度測定 + 表示という2つの機能が必要",

    "sensor_options": [

      {

        "name": "DHT22",

        "pros": "湿度も測れる、デジタル出力",

        "cons": "応答が遅い",

        "jlcpcb": "C156021",

        "price": 150

      },

      {

        "name": "DS18B20",

        "pros": "高精度、1-Wire通信",

        "cons": "湿度は測れない",

        "jlcpcb": "C376006",

        "price": 80

      },

      {

        "name": "LM35",

        "pros": "シンプル、アナログ出力",

        "cons": "精度がやや低い",

        "jlcpcb": "C127814",

        "price": 30

      }

    ],

    "display_options": [

      {

        "name": "LCD 16x2（I2C）",

        "pros": "見やすい、I2C で配線簡単",

        "cons": "消費電力大きい",

        "jlcpcb": "C52277",

        "price": 200

      },

      {

        "name": "OLED 0.96inch",

        "pros": "小型、低消費電力",

        "cons": "表示エリア小さい",

        "jlcpcb": "C88334",

        "price": 150

      }

    ],

    "recommendation": {

      "sensor": "DHT22（初心者にも扱いやすい）",

      "display": "LCD 16x2 I2C（見やすさ優先）",

      "total_cost": 350,

      "difficulty": "中級"

    }

  }

}

```

 

**AI応答**:

```

🤖 AI: 温度測定＆表示回路ですね！

 

       🤔 いくつか質問があります：

 

       1️⃣ 湿度も測りたいですか？

          [はい、両方] [温度だけでOK]

 

       2️⃣ どこで使いますか？

          [室内] [屋外] [どちらも]

 

       3️⃣ 予算の目安は？

          [できるだけ安く] [¥1000くらい] [こだわらない]

```

 

**ユーザーの選択**: はい、両方 / 室内 / ¥1000くらい

 

**AI応答**:

```

🤖 AI: 了解です！では以下の構成を提案します：

 

       📊 **推奨構成**

 

       🌡️ センサー: DHT22

       ┌───────────────────────────┐

       │ • 温度: -40~80°C (±0.5°C)│

       │ • 湿度: 0~100% (±2%)     │

       │ • デジタル出力(簡単)      │

       │ • JLCPCB: C156021 (¥150) │

       └───────────────────────────┘

 

       📺 ディスプレイ: LCD 16x2 (I2C)

       ┌───────────────────────────┐

       │ • 2行16文字表示           │

       │ • I2C接続(配線2本だけ)    │

       │ • バックライト付き         │

       │ • JLCPCB: C52277 (¥200)  │

       └───────────────────────────┘

 

       💰 合計: ¥350 (予算内！)

 

       🎓 **この回路で学べること**:

       • デジタルセンサーの使い方

       • I2C通信プロトコル

       • Arduinoライブラリの活用

 

       [✅ この構成で設計] [🔄 別の案を見る]

```

 

**ユーザー**: ✅ この構成で設計

 

**システムが生成**:

```

回路図を生成中...

 

1. Arduino Nano を配置 ✓

2. DHT22 センサーを配置 ✓

3. LCD I2C ディスプレイを配置 ✓

4. プルアップ抵抗を追加 ✓

5. 配線を自動生成 ✓

6. 電源回路を追加 ✓

 

完成！

```

 

**Gemini 視覚的検証**:

```json

{

  "analysis": {

    "strengths": [

      "I2C接続が正しくSDA/SCLに配線されている",

      "DHT22のプルアップ抵抗が適切に配置",

      "電源のデカップリングコンデンサが追加されている"

    ],

    "suggestions": [

      {

        "component": "DHT22",

        "issue": "データピンが長い配線になっている",

        "suggestion": "Arduinoに近づける（ノイズ対策）",

        "visual_annotation": {

          "draw_arrow": true,

          "from": "current_position",

          "to": "suggested_position"

        }

      }

    ],

    "code_example": `

// 提案されるArduinoコード

#include <DHT.h>

#include <LiquidCrystal_I2C.h>

 

#define DHTPIN 2

#define DHTTYPE DHT22

 

DHT dht(DHTPIN, DHTTYPE);

LiquidCrystal_I2C lcd(0x27, 16, 2);

 

void setup() {

  dht.begin();

  lcd.init();

  lcd.backlight();

}

 

void loop() {

  float temp = dht.readTemperature();

  float humidity = dht.readHumidity();

 

  lcd.setCursor(0, 0);

  lcd.print("Temp: ");

  lcd.print(temp);

  lcd.print("C");

 

  lcd.setCursor(0, 1);

  lcd.print("Humidity: ");

  lcd.print(humidity);

  lcd.print("%");

 

  delay(2000);

}

    `

  }

}

```

 

**最終的なUI表示**:

```

🎉 温度・湿度測定回路が完成しました！

 

┌─────────────────────────────────────┐

│ [詳細な回路図]                       │

│                                     │

│  Arduino Nano                       │

│  ┌─────────┐                        │

│  │  5V ────┼──→ VCC (DHT22, LCD)  │

│  │  GND ───┼──→ GND (DHT22, LCD)  │

│  │  D2 ────┼──→ DATA (DHT22)      │

│  │  A4 ────┼──→ SDA (LCD I2C)     │

│  │  A5 ────┼──→ SCL (LCD I2C)     │

│  └─────────┘                        │

└─────────────────────────────────────┘

 

✅ Gemini チェック: 92/100 (Excellent!)

 

💡 改善提案が1件あります:

  • DHT22をArduinoに近づけるとノイズに強くなります

  [自動で改善を適用]

 

📝 Arduinoコード:

  [コードをコピー] [詳しく見る]

 

📦 部品リスト (¥1,050):

  • Arduino Nano (C14568) ¥350

  • DHT22 センサー (C156021) ¥150

  • LCD 16x2 I2C (C52277) ¥200

  • 抵抗10kΩ (C25804) ¥2

  • その他コンデンサ等 ¥48

 

[🏭 JLCPCBで発注] [💾 保存] [🎓 詳しく学ぶ]

```

 

---

 

## 📖 シナリオ 3: エラーからの学習

 

### 状況

ユーザーが間違った要求をした場合のAIの対応

 

**ユーザー**: 1000個のLEDを光らせる回路を作りたい

 

**GPT-5.1 Thinking**:

```json

{

  "thinking": {

    "concern": "1000個のLEDは初心者には非現実的",

    "issues": [

      "電源の容量が膨大（20mA × 1000 = 20A）",

      "基板サイズが巨大",

      "コストが高額",

      "実装の複雑さ"

    ],

    "approach": "代替案を提示しつつ、教育的に説明"

  }

}

```

 

**AI応答**:

```

🤖 AI: 1000個のLEDですか！壮大ですね！

 

       ただ、ちょっと待ってください。

       いくつか問題があります：

 

       ⚡ **電源の問題**

       LED 1個 = 20mA

       1000個 = 20,000mA = 20A（アンペア）

 

       これは一般的なUSB充電器の40倍の電流です！

       専用の大型電源が必要になります。

 

       💰 **コストの問題**

       LED ¥5 × 1000 = ¥5,000

       抵抗 ¥2 × 1000 = ¥2,000

       合計: 最低でも¥7,000以上

 

       📏 **サイズの問題**

       1000個のLEDを配置すると、基板サイズが

       30cm × 30cm 以上になります。

 

       🤔 **別の方法はどうでしょう？**

 

       もし「たくさんのLEDを光らせたい」なら：

 

       1️⃣ **LEDマトリックスを使う** (おすすめ!)

          ┌─────────────────────────┐

          │ 8×8 LEDマトリックス     │

          │ 64個のLEDを簡単制御     │

          │ コスト: ¥100           │

          └─────────────────────────┘

 

       2️⃣ **LEDテープを使う**

          ┌─────────────────────────┐

          │ WS2812B LEDテープ       │

          │ 1mに60個のLED          │

          │ 1本の信号線で制御       │

          │ コスト: ¥800/m         │

          └─────────────────────────┘

 

       3️⃣ **それでも個別に制御したい場合**

          マルチプレクサICを使った設計を提案します

          （中級〜上級向け）

 

       どれか興味がありますか？

       [1️⃣ LEDマトリックス] [2️⃣ LEDテープ] [3️⃣ 詳しく教えて]

```

 

---

 

## 🎯 重要な設計原則

 

これらのシナリオから分かる設計原則：

 

### 1. **段階的な対話**

- いきなり設計せず、ユーザーのニーズを深掘り

- 選択肢を提示して、ユーザーに判断してもらう

- 専門用語は必ず説明

 

### 2. **教育的アプローチ**

- 単に回路を作るだけでなく「なぜ」を説明

- 計算過程を見せる

- 学習ポイントを明示

 

### 3. **視覚的フィードバック**

- Gemini のマルチモーダル分析

- 注釈付きの回路図

- Before/After の比較

 

### 4. **安全性第一**

- 間違った要求には代替案を提示

- コスト・実現可能性を常に考慮

- 初心者が怪我をしない設計

 

### 5. **段階的な複雑さ**

- 最初は最もシンプルな回路から

- 成功体験を積み重ねる

- 徐々に高度な機能を提案

 

---

 

## 🚀 次のステップ

 

このシナリオを実現するために必要な実装:

 

1. **会話管理システム**

   - 対話履歴の保存

   - コンテキストの維持

   - 分岐ロジック

 

2. **視覚的UI**

   - リアルタイムプレビュー

   - 注釈機能

   - インタラクティブな選択肢

 

3. **知識ベース**

   - 部品データベース

   - 回路テンプレート

   - 教育的コンテンツ

 

これらの実装を始めますか？
